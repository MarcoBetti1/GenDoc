Metadata-Version: 2.4
Name: gendoc
Version: 0.1.0
Summary: GenDoc prototype for layered AI-assisted documentation.
Author: Contributors
Author-email: Marco Betti <marco@example.com>
Requires-Python: >=3.11
Description-Content-Type: text/markdown
Requires-Dist: openai>=1.14.0
Requires-Dist: python-dotenv>=1.0.0

# GenDoc Prototype

GenDoc is an experimental pipeline that turns an existing codebase into layered documentation, starting from ultra low-level method walk-throughs and climbing to narrative project overviews via multi-agent prompt orchestration.

[**GenDoc Output Example**](output.md): These documents were entirely autogenerated based only from the code of this project.

## Getting Started

### 1. Create and activate a virtual environment
```powershell
python -m venv .venv
.\.venv\Scripts\Activate.ps1
```

### 2. Install the package in editable mode
```powershell
pip install -e .
```

### 3. Generate layered documentation
```powershell
gendoc run --repo samples/demo_app --out docs/generated/demo-output.md
```

The default run uses a mock LLM so the pipeline can execute without external credentials. To create production-strength docs for the chess harness sample with the real OpenAI API, provide an API key and run:

```powershell
$Env:OPENAI_API_KEY = "sk-..."
gendoc run --repo samples/llmchess --out docs/generated/demo-output.md --llm-provider openai
```

Each run produces a polished Markdown overview plus supporting artefacts (`cross-reference.json`, `prompt-ledger.jsonl`, and per-run assets under `docs/generated/artefacts/`).

## Key CLI Flags
- `--use-existing-docs`: Blend in any Markdown/RST files from the repo as supplemental context.
- `--enable-batching / --disable-batching`: Toggle prompt batching where applicable.
- `--enable-reviewer / --disable-reviewer`: Control whether reviewer agents critique first-pass summaries.
- `--llm-provider`: Choose `mock` (default) or `openai`.
- `--llm-model`: Override the provider's default base model without editing configs.
- `--config`: Point to a `gendoc.config.toml` file; CLI flags always win over file values.
- `--no-existing-docs`: Force the run to ignore supplemental docs even if the config enables them.

Run `gendoc run --help` for the full list of options.

## Configuration File

GenDoc now reads from `gendoc.config.toml`, giving you a single place to tune models, timeouts, optional sections, and artefact names. All keys are optional—anything omitted falls back to the baked-in defaults or CLI overrides.

| Section | Purpose |
| --- | --- |
| `[paths]` | Default `repo`, `output`, and optional `ledger` locations. |
| `[pipeline]` | Toggles for reviewers, batching, chunk sizes, and section whitelists. |
| `[llm]` | Provider, default model, retry policy, and per-stage model/temperature overrides via `[llm.stage_models]` and `[llm.stage_temperatures]`. |
| `[analysis]` | Directory ignore list for the AST analyzer. |
| `[existing_docs]` | File extensions, exclusion markers, and excerpt sizes when mining existing docs. |
| `[run_section]` | Enablement flag, keyword filters, source paths, and context limits for the autogenerated “To Run” guide. |
| `[features]` | Fine-grained switches for run instructions, repo layout, CLI reference, component docs, and whether text is generalized for samples. |
| `[output]` | Names for artefact directories, ledger files, cross references, and component doc folders. |

Example excerpt:

```toml
[llm]
provider = "openai"
default_model = "gpt-4o-mini"
temperature = 0.1
max_retries = 5

[llm.stage_models]
document = "gpt-4o"
component_polish = "gpt-4o-mini"

[features]
include_run_section = true
include_component_docs = true
generalize_document_text = false
component_doc_limit = 10
```

Place the file at the repo root or pass `--config path/to/file`. The loader also checks inside the target repo you pass via `--repo`, so you can ship project-specific defaults alongside the codebase.

## Repository Layout
```
GenDoc/
├── docs/              # Generated docs and prototype notes
├── samples/           # Curated sample projects for repeatable runs
├── src/gendoc/        # Source code for the CLI and pipeline
├── project-goal.md    # Vision statement
└── first-version-plan.md
```

## Next Steps
- Config file (diff llms per diff functions)
- Token limit

